#include <Arduino.h>
#include <Adafruit_GFX.h>
#include <SPI.h>
#include <Adafruit_GrayOLED.h>
#include <Adafruit_PCD8544.h>
#include <Ultrasonic.h>
#include <Bounce2.h>

#define BUTTON_MENU_PIN 10
int page = 0;

#define HC_SR04_TRIGGER A2
#define HC_SR04_ECHO A3
int distance = 0;

Adafruit_PCD8544 display = Adafruit_PCD8544(7, 6, 5, 4, 3);

int getDistance()
{
  digitalWrite(HC_SR04_TRIGGER, LOW);
  delayMicroseconds(4);
  digitalWrite(HC_SR04_TRIGGER, HIGH);
  delayMicroseconds(20);
  digitalWrite(HC_SR04_TRIGGER, LOW);
  delayMicroseconds(10);
  long pulse_us = pulseIn(HC_SR04_ECHO, HIGH);
  int distance_cm = pulse_us / 54;
  return distance_cm;
}

void setup()
{
  pinMode(BUTTON_MENU_PIN, INPUT);
  pinMode(HC_SR04_TRIGGER, OUTPUT);
  pinMode(HC_SR04_ECHO, INPUT);
  display.begin();
  display.setContrast(60);
  delay(2000);
  display.clearDisplay();
}

void ruler()
{
  display.clearDisplay();
  distance = getDistance();
  display.setCursor(0, 0);
  display.print("Dist.: ");
  display.print(distance);
  display.println("cm");
  display.display();
}

void loop()
{
  ruler();
}